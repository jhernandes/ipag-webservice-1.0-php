<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Integração iPag Webservice PHP 1.0 by jhernandes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Integração iPag Webservice PHP 1.0</h1>
      <h2 class="project-tagline">Pacote de integração para o iPag webservice 1.0 em PHP</h2>
      <a href="https://github.com/jhernandes/ipag-webservice-1.0-php" class="btn">View on GitHub</a>
      <a href="https://github.com/jhernandes/ipag-webservice-1.0-php/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jhernandes/ipag-webservice-1.0-php/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="webservice-10-php" class="anchor" href="#webservice-10-php" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Webservice 1.0 PHP</h1>

<p>Integração em PHP com o Webservice iPag 1.0</p>

<h2>
<a id="dependências" class="anchor" href="#depend%C3%AAncias" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependências</h2>

<ul>
<li>PHP &gt;= 5.3.*</li>
</ul>

<h2>
<a id="instalação" class="anchor" href="#instala%C3%A7%C3%A3o" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Instalação</h2>

<p>Se já possui um arquivo <code>composer.json</code>, basta adicionar a seguinte dependência ao seu projeto:</p>

<div class="highlight highlight-source-json"><pre><span class="pl-s"><span class="pl-pds">"</span>require<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>jhernandes/ipag-webservice-1.0-php<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>dev-master<span class="pl-pds">"</span></span>
}</pre></div>

<p>Com a dependência adicionada ao <code>composer.json</code>, basta executar:</p>

<pre><code>composer install
</code></pre>

<p>Alternativamente, você pode executar diretamente em seu terminal:</p>

<pre><code>composer require "jhernandes/ipag-webservice-1.0-php:dev-master"
</code></pre>

<h2>
<a id="exemplo-de-transaÇÃo-com-cartÃo-payment-request" class="anchor" href="#exemplo-de-transa%C3%87%C3%83o-com-cart%C3%83o-payment-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EXEMPLO DE TRANSAÇÃO COM CARTÃO (Payment Request)</h2>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Ipag</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Order</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Payment</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Transaction</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$ipag</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Ipag</span>(<span class="pl-s"><span class="pl-pds">'</span>seu_id_ipag<span class="pl-pds">'</span></span>, <span class="pl-c1">Ipag</span><span class="pl-k">::</span><span class="pl-c1">TEST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$order</span> <span class="pl-k">=</span>    <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>order(<span class="pl-c1">Order</span><span class="pl-k">::</span><span class="pl-c1">OPERATION_PAYMENT</span>, <span class="pl-s"><span class="pl-pds">'</span>http://minhaurl.dev<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>20161109003<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1.00<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$card</span> <span class="pl-k">=</span>     <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>card(<span class="pl-s"><span class="pl-pds">'</span>4556657802832607<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>SENHOR TESTE<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>10<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>21<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$payment</span> <span class="pl-k">=</span>  <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>payment(<span class="pl-c1">Payment</span><span class="pl-k">::</span><span class="pl-c1">CREDIT_VISA</span>, <span class="pl-smi">$card</span>);</span>
<span class="pl-s1"><span class="pl-smi">$customer</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>customer(<span class="pl-s"><span class="pl-pds">'</span>SENHOR TESTE<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>senhor@teste.com.br<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>12312312333<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>1839161627<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$address</span> <span class="pl-k">=</span>  <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>address(<span class="pl-s"><span class="pl-pds">'</span>Rua Teste<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Bairro Teste<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>20000-000<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>São Paulo<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>SP<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>BR<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$customer</span><span class="pl-k">-&gt;</span>setAddress(<span class="pl-smi">$address</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$tx</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>transaction(<span class="pl-smi">$order</span>, <span class="pl-smi">$payment</span>, <span class="pl-smi">$customer</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$response</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>paymentRequest(<span class="pl-smi">$tx</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>hasError()) {</span>
<span class="pl-s1">    <span class="pl-c1">var_dump</span>(<span class="pl-c1">print_r</span>(<span class="pl-smi">$response</span>, <span class="pl-c1">true</span>));</span>
<span class="pl-s1">    <span class="pl-k">exit</span>;</span>
<span class="pl-s1">}</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>getErrorMessage();</span>
<span class="pl-s1"><span class="pl-k">exit</span>;</span></pre></div>

<h2>
<a id="exemplo-de-transaÇÃo-com-boleto-payment-request" class="anchor" href="#exemplo-de-transa%C3%87%C3%83o-com-boleto-payment-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EXEMPLO DE TRANSAÇÃO COM BOLETO (Payment Request)</h2>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Ipag</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Order</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Payment</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Transaction</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$ipag</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Ipag</span>(<span class="pl-s"><span class="pl-pds">'</span>seu_id_ipag<span class="pl-pds">'</span></span>, <span class="pl-c1">Ipag</span><span class="pl-k">::</span><span class="pl-c1">TEST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$order</span> <span class="pl-k">=</span>    <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>order(<span class="pl-c1">Order</span><span class="pl-k">::</span><span class="pl-c1">OPERATION_PAYMENT</span>, <span class="pl-s"><span class="pl-pds">'</span>http://minhaurl.dev<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>20161109003<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1.00<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$payment</span> <span class="pl-k">=</span>  <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>payment(<span class="pl-c1">Payment</span><span class="pl-k">::</span><span class="pl-c1">BANKSLIP_BB</span>);</span>
<span class="pl-s1"><span class="pl-smi">$customer</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>customer(<span class="pl-s"><span class="pl-pds">'</span>SENHOR TESTE<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>senhor@teste.com.br<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>12312312333<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>1839161627<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$address</span> <span class="pl-k">=</span>  <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>address(<span class="pl-s"><span class="pl-pds">'</span>Rua Teste<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Bairro Teste<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>20000-000<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>São Paulo<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>SP<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>BR<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$customer</span><span class="pl-k">-&gt;</span>setAddress(<span class="pl-smi">$address</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$tx</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>transaction(<span class="pl-smi">$order</span>, <span class="pl-smi">$payment</span>, <span class="pl-smi">$customer</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$response</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>paymentRequest(<span class="pl-smi">$tx</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>hasError()) {</span>
<span class="pl-s1">    <span class="pl-c1">var_dump</span>(<span class="pl-c1">print_r</span>(<span class="pl-smi">$response</span>, <span class="pl-c1">true</span>));</span>
<span class="pl-s1">    <span class="pl-k">exit</span>;</span>
<span class="pl-s1">}</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>getErrorMessage();</span>
<span class="pl-s1"><span class="pl-k">exit</span>;</span></pre></div>

<p><em>Caso tenha sucesso o link para o boleto estará em $response-&gt;getUrlAuthentication();</em></p>

<h2>
<a id="exemplo-de-consulta-de-transaÇÃo-consult-request" class="anchor" href="#exemplo-de-consulta-de-transa%C3%87%C3%83o-consult-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EXEMPLO DE CONSULTA DE TRANSAÇÃO (Consult Request)</h2>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Ipag</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Order</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Payment</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Transaction</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$ipag</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Ipag</span>(<span class="pl-s"><span class="pl-pds">'</span>seu_id_ipag<span class="pl-pds">'</span></span>, <span class="pl-c1">Ipag</span><span class="pl-k">::</span><span class="pl-c1">TEST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$order</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>order(<span class="pl-c1">Order</span><span class="pl-k">::</span><span class="pl-c1">OPERATION_CONSULT</span>, <span class="pl-s"><span class="pl-pds">'</span>http://minhaurl.dev<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-c">//Caso não tenha o TID e tenha o OrderId (Número do pedido)</span></span>
<span class="pl-s1"><span class="pl-c">// $order = $ipag-&gt;order(Order::OPERATION_CONSULT, 'http://minhaurl.dev', '20161109003');</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$tx</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>transaction(<span class="pl-smi">$order</span>);</span>
<span class="pl-s1"><span class="pl-smi">$tx</span><span class="pl-k">-&gt;</span>setTid(<span class="pl-s"><span class="pl-pds">'</span>100699306900087B7BDA<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$response</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>consultRequest(<span class="pl-smi">$tx</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>hasError()) {</span>
<span class="pl-s1">    <span class="pl-c1">var_dump</span>(<span class="pl-c1">print_r</span>(<span class="pl-smi">$response</span>, <span class="pl-c1">true</span>));</span>
<span class="pl-s1">    <span class="pl-k">exit</span>;</span>
<span class="pl-s1">}</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>getErrorMessage();</span>
<span class="pl-s1"><span class="pl-k">exit</span>;</span></pre></div>

<h2>
<a id="exemplo-de-captura-de-transaÇÃo-capture-request" class="anchor" href="#exemplo-de-captura-de-transa%C3%87%C3%83o-capture-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EXEMPLO DE CAPTURA DE TRANSAÇÃO (Capture Request)</h2>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Ipag</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Order</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Payment</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Transaction</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$ipag</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Ipag</span>(<span class="pl-s"><span class="pl-pds">'</span>seu_id_ipag<span class="pl-pds">'</span></span>, <span class="pl-c1">Ipag</span><span class="pl-k">::</span><span class="pl-c1">TEST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$order</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>order(<span class="pl-c1">Order</span><span class="pl-k">::</span><span class="pl-c1">OPERATION_CAPTURE</span>, <span class="pl-s"><span class="pl-pds">'</span>http://minhaurl.dev<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$tx</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>transaction(<span class="pl-smi">$order</span>);</span>
<span class="pl-s1"><span class="pl-c">//Para capturar é necessário ter um TID</span></span>
<span class="pl-s1"><span class="pl-smi">$tx</span><span class="pl-k">-&gt;</span>setTid(<span class="pl-s"><span class="pl-pds">'</span>100699306900087B7BDA<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$response</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>captureRequest(<span class="pl-smi">$tx</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>hasError()) {</span>
<span class="pl-s1">    <span class="pl-c1">var_dump</span>(<span class="pl-c1">print_r</span>(<span class="pl-smi">$response</span>, <span class="pl-c1">true</span>));</span>
<span class="pl-s1">    <span class="pl-k">exit</span>;</span>
<span class="pl-s1">}</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>getErrorMessage();</span>
<span class="pl-s1"><span class="pl-k">exit</span>;</span></pre></div>

<h2>
<a id="exemplo-de-cancelamento-de-transaÇÃo-cancel-request" class="anchor" href="#exemplo-de-cancelamento-de-transa%C3%87%C3%83o-cancel-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EXEMPLO DE CANCELAMENTO DE TRANSAÇÃO (Cancel Request)</h2>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Ipag</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Order</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Payment</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Ipag\Transaction</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$ipag</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Ipag</span>(<span class="pl-s"><span class="pl-pds">'</span>seu_id_ipag<span class="pl-pds">'</span></span>, <span class="pl-c1">Ipag</span><span class="pl-k">::</span><span class="pl-c1">TEST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$order</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>order(<span class="pl-c1">Order</span><span class="pl-k">::</span><span class="pl-c1">OPERATION_CANCEL</span>, <span class="pl-s"><span class="pl-pds">'</span>http://minhaurl.dev<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$tx</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>transaction(<span class="pl-smi">$order</span>);</span>
<span class="pl-s1"><span class="pl-c">//Para cancelar é necessário informar o TID</span></span>
<span class="pl-s1"><span class="pl-smi">$tx</span><span class="pl-k">-&gt;</span>setTid(<span class="pl-s"><span class="pl-pds">'</span>100699306900087B7BDA<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$response</span> <span class="pl-k">=</span> <span class="pl-smi">$ipag</span><span class="pl-k">-&gt;</span>cancelRequest(<span class="pl-smi">$tx</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>hasError()) {</span>
<span class="pl-s1">    <span class="pl-c1">var_dump</span>(<span class="pl-c1">print_r</span>(<span class="pl-smi">$response</span>, <span class="pl-c1">true</span>));</span>
<span class="pl-s1">    <span class="pl-k">exit</span>;</span>
<span class="pl-s1">}</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$response</span><span class="pl-k">-&gt;</span>getErrorMessage();</span>
<span class="pl-s1"><span class="pl-k">exit</span>;</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jhernandes/ipag-webservice-1.0-php">Integração iPag Webservice PHP 1.0</a> is maintained by <a href="https://github.com/jhernandes">jhernandes</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
